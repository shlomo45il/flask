# מערכת ניהול הזמנות - הגדרות ודפים

## מערכת הרשאות והתחברות

### דפי התחברות והרשמה
1. **דף התחברות** (`/login`)
   - שדות נדרשים:
     - שם משתמש
     - סיסמה
   - פונקציונליות:
     - בדיקת אימות משתמש
     - הפניה לדף הבית המתאים לפי תפקיד
     - קישור לדף שחזור סיסמה
     - קישור להרשמה

2. **דף הרשמה** (`/register`)
   - שדות נדרשים:
     - שם פרטי
     - שם משפחה
     - אימייל
     - טלפון
     - שם משתמש
     - סיסמה
     - אימות סיסמה
   - ולידציות:
     - אימייל תקין וייחודי
     - שם משתמש ייחודי
     - סיסמה חזקה (8 תווים לפחות, אותיות ומספרים)

## דפי ממשק משתמש

### דפי מנהל
1. **לוח בקרה** (`/admin/dashboard`)
   - סטטיסטיקות כלליות
   - הזמנות אחרונות
   - התראות מערכת

2. **ניהול משתמשים** (`/admin/users`)
   - רשימת משתמשים
   - הוספת משתמש חדש
   - עריכת משתמש
   - הקצאת תפקידים

3. **יומן פעילות** (`/admin/activity-log`)
   - תיעוד כל הפעולות במערכת
   - סינון לפי משתמש/פעולה/תאריך

4. **הגדרות מערכת** (`/admin/settings`)
   - הגדרות כלליות
   - הגדרות אבטחה
   - הגדרות תצוגה

### דפי משתמש רגיל
1. **פרופיל משתמש** (`/user/profile`)
   - פרטים אישיים
   - עדכון פרטים
   - שינוי סיסמה

2. **דף הבית** (`/`)
   - תפריט ניווט
   - סקירת מצב אישי
   - התראות אישיות

### דפי הזמנות
1. **יצירת הזמנה** (`/orders/create`)
   - טופס יצירת הזמנה
   - בחירת לקוח
   - בחירת מוצרים
   - הגדרת פרטי משלוח

2. **רשימת הזמנות** (`/orders`)
   - טבלת הזמנות
   - סינון וחיפוש
   - עדכון סטטוס

3. **פרטי הזמנה** (`/orders/{id}`)
   - פרטים מלאים
   - היסטוריית סטטוסים
   - מעקב משלוח

## אבטחה ואימות

### מערכת התחברות
1. **אימות דו-שלבי**
   - אימות ראשוני באמצעות שם משתמש וסיסמה
   - שימוש ב-JWT (JSON Web Tokens) לאימות מתמשך
   - ניהול הרשאות מבוסס תפקידים

2. **אבטחת סיסמאות**
   - הצפנת סיסמאות באמצעות Django's Password Hasher
   - מדיניות סיסמאות חזקה
   - מניעת שימוש חוזר בסיסמאות ישנות

3. **הגנה מפני התקפות**
   - הגנת CSRF בכל הטפסים
   - Rate Limiting למניעת Brute Force
   - Session Management מאובטח
   - Secure Headers

4. **תיעוד ומעקב**
   - תיעוד כל ניסיונות הכניסה
   - תיעוד IP ו-User Agent
   - התראות על ניסיונות חשודים

### הרשאות לפי תפקיד
1. **מנהל מערכת**
   - גישה מלאה לכל חלקי המערכת
   - ניהול משתמשים והרשאות
   - צפייה בלוגים ודוחות

2. **סוכן מכירות**
   - יצירת הזמנות חדשות
   - צפייה בהזמנות שלו
   - עדכון פרטי לקוחות

3. **מקליד**
   - עדכון והשלמת הזמנות
   - צפייה בכל ההזמנות
   - הפקת דוחות

4. **מלקט**
   - צפייה בהזמנות לליקוט
   - עדכון סטטוס ליקוט
   - דיווח על חוסרים

5. **אורז**
   - צפייה בהזמנות לאריזה
   - יצירת תעודות משלוח
   - עדכון סטטוס אריזה

6. **שליח**
   - צפייה במשלוחים שלו
   - עדכון סטטוס משלוח
   - תיעוד מסירה

## תהליך עבודה מומלץ

1. **התחברות למערכת**
   - כניסה דרך דף ההתחברות
   - הפניה אוטומטית לדף הבית הרלוונטי

2. **עבודה שוטפת**
   - שימוש בתפריט הניווט
   - מעקב אחר התראות
   - עדכון נתונים בזמן אמת

3. **סיום עבודה**
   - שמירת שינויים
   - התנתקות מסודרת
   - סגירת הדפדפן

## תחזוקה ותמיכה

1. **גיבויים**
   - גיבוי אוטומטי יומי
   - גיבוי ידני לפני שינויים משמעותיים
   - שמירת היסטוריה ל-30 יום

2. **תיעוד שינויים**
   - רישום כל פעולה ביומן המערכת
   - תיעוד שינויי הרשאות
   - מעקב אחר ניסיונות כניסה

3. **תמיכה במשתמשים**
   - מדריך למשתמש מקוון
   - טופס פנייה לתמיכה
   - מספר טלפון לתמיכה דחופה

### API אבטחה
1. **אימות API**
   - שימוש ב-JWT לאימות
   - תוקף טוקן מוגבל
   - מנגנון Refresh Token

2. **הרשאות API**
   - הגדרת הרשאות לפי נקודות קצה
   - בדיקת הרשאות לפי תפקיד
   - תיעוד כל הקריאות

## דפים חסרים שיש ליצור

### תבניות הזמנות
1. **רשימת הזמנות** (`templates/orders/list.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>רשימת הזמנות</h2>
       <table class="table">
           <!-- תוכן הטבלה -->
       </table>
   </div>
   {% endblock %}
   ```

2. **יצירת הזמנה** (`templates/orders/create.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>יצירת הזמנה חדשה</h2>
       <form method="post">
           <!-- טופס יצירת הזמנה -->
       </form>
   </div>
   {% endblock %}
   ```

3. **פרטי הזמנה** (`templates/orders/detail.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>פרטי הזמנה</h2>
       <!-- פרטי ההזמנה -->
   </div>
   {% endblock %}
   ```

### תבניות ליקוט ואריזה
1. **דף ליקוט** (`templates/warehouse/picking.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>ליקוט הזמנות</h2>
       <!-- רשימת הזמנות לליקוט -->
   </div>
   {% endblock %}
   ```

2. **דף אריזה** (`templates/warehouse/packing.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>אריזת הזמנות</h2>
       <!-- רשימת הזמנות לאריזה -->
   </div>
   {% endblock %}
   ```

### תבניות משלוחים
1. **רשימת משלוחים** (`templates/shipping/list.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>רשימת משלוחים</h2>
       <!-- רשימת משלוחים -->
   </div>
   {% endblock %}
   ```

2. **מעקב משלוח** (`templates/shipping/tracking.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>מעקב משלוח</h2>
       <!-- פרטי מעקב משלוח -->
   </div>
   {% endblock %}
   ```

### תבניות דוחות
1. **דוחות מערכת** (`templates/reports/index.html`)
   ```html
   {% extends 'base.html' %}
   {% block content %}
   <div class="container">
       <h2>דוחות מערכת</h2>
       <!-- רשימת דוחות זמינים -->
   </div>
   {% endblock %}
   ```

## צעדים הבאים
1. יצירת התבניות החסרות
2. הוספת הבקרים (Views) המתאימים
3. הגדרת ה-URLs
4. בדיקות מקיפות של כל הפונקציונליות 